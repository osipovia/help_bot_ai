### **Документ: Концепция проекта "LLM-ассистент для консультации клиентов"**

**Версия:** 1.0  
**Дата:** 07.07.2025  
**Автор:** Илья Осипов, Системный аналитик / Архитектор

#### **1. Введение**
Настоящий документ описывает концепцию разработки программного продукта — интеллектуального ассистента на базе большой языковой модели (LLM). Цель документа — зафиксировать ключевые бизнес-требования, функциональные возможности и первоначальное видение технической реализации проекта.

#### **2. Концепция проекта**

**2.1. Название проекта:** LLM-ассистент "Академии дронов".

**2.2. Цель проекта:**
Создать автоматизированный инструмент для проведения первичных консультаций клиентов, который позволит снизить нагрузку на персонал, повысить доступность сервиса (24/7) и улучшить качество клиентского опыта за счет быстрых и консистентных ответов.

**2.3. Платформа:**
Чат-бот в мессенджере **Telegram**, взаимодействующий с пользователями через Telegram Bot API.

**2.4. Целевая аудитория:**
Потенциальные клиенты компании "Академия дронов", интересующиеся обучением, корпоративными мероприятиями и другими услугами компании.

#### **3. Функциональные требования (Что должен делать бот)**

1.  **Консультация по услугам:** Бот должен быть способен отвечать на прямые вопросы клиентов об услугах компании, их стоимости, продолжительности, формате проведения и т.д.
2.  **Квалификация потребностей клиента:** Бот должен задавать уточняющие вопросы для выявления истинных потребностей и проблем клиента (например, "Для кого вы ищете курс?", "Какой у вас опыт?", "Это для хобби или карьеры?").
3.  **Персонализированные предложения:** На основе выявленных потребностей бот должен предлагать наиболее подходящие услуги или пакеты услуг из продуктовой линейки компании.
4.  **Сбор контактных данных (Лидогенерация):** В случае заинтересованности клиента, бот должен предложить ему оставить контактные данные (имя, номер телефона) для дальнейшей связи с менеджером.
5.  **Поддержание контекста диалога:** Бот должен помнить предыдущие реплики в рамках одной сессии для ведения связного и логичного диалога.
6.  **Создание ссылки на оплату:** После выбора курса и подтверждения намерения, бот должен иметь возможность сгенерировать и предоставить клиенту уникальную ссылку на оплату через интеграцию с API 1С.

#### **4. Пример пользовательского сценария (Use Case)**

*   **Пользователь:** Здравствуйте! Расскажите про курсы по управлению дронами.
*   **Бот:** Здравствуйте! Рад вас проконсультировать. У нас есть несколько программ. Чтобы я мог предложить вам наиболее подходящую, уточните, пожалуйста, для кого вы ищете курс — для взрослого или для ребенка? И есть ли у вас уже опыт пилотирования?
*   **Пользователь:** Ищу для себя, опыта нет совсем, хочу с нуля.
*   **Бот:** Отличный выбор! Для начинающих у нас есть базовый курс "Обучение полетам и пилотированию FPV-дронов". Он длится 4 месяца и стоит 32 000 ₽. На нем вы изучите основы аэродинамики, научитесь работать с оборудованием и получите много практики на симуляторах и реальных дронах. Первое занятие — бесплатное. Хотите узнать подробнее или записаться на пробное занятие?
*   **Пользователь:** Да, хочу записаться.
*   **Бот:** Замечательно! Чтобы сформировать для вас ссылку на оплату, пожалуйста, подтвердите ваш номер телефона или введите его, если мы еще не общались.
*   **Пользователь:** +79001234567
*   **Бот:** Отлично! Создаю для вас заказ. Минутку... Готово! Вот ваша персональная ссылка для оплаты курса "Обучение полетам и пилотированию FPV-дронов" через СБП: [https://online.1c_payment_system.ru/order/view?uuid=...](https://online.1c_payment_system.ru/order/view?uuid=...). После оплаты наш менеджер свяжется с вами для согласования даты первого занятия.

#### **5. Предлагаемая техническая реализация**

**5.1. Первоначальная идея (зафиксирована со слов заказчика):**
Информация о компании и услугах будет подготовлена вручную и полностью размещена в системном промпте LLM.

**5.2. Анализ и рекомендации архитектора:**
Данный подход является простым для старта, но имеет критические ограничения, которые помешают развитию и стабильной работе проекта:

1.  **Ограничение контекстного окна:** Системные промпты имеют лимит по объему текста. Вся информация об услугах (из предоставленных HTML-файлов) физически не поместится в промпт большинства современных моделей.
2.  **Сложность обновления:** При любом изменении (например, цены, описания услуги) придется вручную редактировать и перезапускать систему с новым, огромным промптом, что трудоемко и повышает риск ошибок.
3.  **Неэффективность и стоимость:** Отправка всего объема данных с каждым запросом пользователя приведет к значительному удорожанию использования LLM API.

**Рекомендуемый подход:** Использовать архитектуру **RAG (Retrieval-Augmented Generation)**.
*   **Суть:** База знаний хранится отдельно в специальной векторной базе данных. При поступлении вопроса от пользователя система находит в этой базе наиболее релевантные фрагменты информации и передает их в LLM вместе с вопросом.
*   **Преимущества:**
    *   **Масштабируемость:** База знаний может быть практически неограниченного размера.
    *   **Простота обновления:** Достаточно обновить или добавить информацию в базе данных, не трогая основной код и промпт бота.
    *   **Эффективность:** В модель передается только нужная для ответа информация, что снижает стоимость и ускоряет обработку.

**5.3. Интеграция с системой оплаты (1С)**
Для реализации функции оплаты будет использоваться интеграция с REST API системы 1С.

*   **Аутентификация:** Получение временного JWT-токена доступа путем отправки `clientId` и `clientSecret` на эндпоинт `POST /api/v1/auth/login`.
*   **Создание заказа:** Отправка данных о клиенте (`ФИО`, `телефон`) и коде курса на эндпоинт `POST /api/v1/orders/createWithPaymentLink` с использованием полученного JWT-токена.
*   **Результат:** API возвращает прямую ссылку на оплату через СБП, которую бот передает клиенту.

#### **6. Архитектура системы (Рекомендуемая)**

`Пользователь` <=> `Telegram API` <=> `Бэкенд-сервер` <=> `Векторная БД` <=> `LLM API`
                                                      ^
                                                      |
                                                      v
                                                   `API 1C`

*   **Фронтенд:** Telegram Bot.
*   **Бэкенд-сервер:** Приложение (например, на Python), которое управляет логикой, обрабатывает запросы и интегрирует все компоненты.
*   **База Знаний:** Векторная база данных (например, ChromaDB, Pinecone).
*   **Ядро ИИ:** Внешний сервис LLM (например, OpenAI API, OpenRouter API).
*   **Платежный шлюз:** API системы 1С для создания заказов и ссылок на оплату.

#### **7. Заключение**
Идея создания LLM-ассистента для консультации клиентов является стратегически верной и обладает высоким бизнес-потенциалом. Для успешной реализации проекта **настоятельно рекомендуется** отойти от первоначальной идеи хранения всей информации в системном промпте в пользу более гибкой и масштабируемой архитектуры **RAG**, а также **интегрировать систему с API 1С** для автоматизации процесса продаж. Это обеспечит стабильность, управляемость и экономическую эффективность системы в долгосрочной перспективе.